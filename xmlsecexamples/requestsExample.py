import requests

#artifactrequest = '''<?xml version="1.0" encoding="UTF-8"?><soap11:Envelope xmlns:soap11="http://schemas.xmlsoap.org/soap/envelope/"><soap11:Body><saml2p:ArtifactResolve ID="_6f553c2d9ec10f5defcb2aefd9ffd1e3" IssueInstant="2019-09-05T09:21:46.653Z" Version="2.0" xmlns:saml2p="urn:oasis:names:tc:SAML:2.0:protocol"><saml2:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity" xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion">http://localhost:5156/SP/samlArt</saml2:Issuer><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#"><ds:SignedInfo><ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/><ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/><ds:Reference URI="#_6f553c2d9ec10f5defcb2aefd9ffd1e3"><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/><ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/></ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><ds:DigestValue>8Ad0voVzSVEHOZ5+Py4sS9Pg8DI=</ds:DigestValue></ds:Reference></ds:SignedInfo><ds:SignatureValue>DpHpmDRbryRa5eYXASd6hoAXRubRrUs735s91nFi5JP1hoBhRRz/sj+PHn1LWYOwBhk23zg52yaXEAqusMkTfOk6RyTAow3TNy92FsnbN27znusZZJp8zbAHkHX19TXaaCpY2cjCYnAnBGNHd/Y3eedGHCN7Mjkq/g2/BS9gdHHP1TN3u3ZY2rhgeikX/HlVGsUobH6OB33mVdn4a9OrG72wclFkCZkIVmxLTOFh67KQJ1GhJVpk17ls2go8u9CelgS6Zh4zOB45QtMcl7euX7alcydKYN4fWCq/r3zfvwvw81/qssaT/WFxNhQ50bTqIjyCXujldbgZOHFfG9ntJA==</ds:SignatureValue><ds:KeyInfo><ds:X509Data><ds:X509Certificate>MIIDaDCCAlACCQDR6jPZhsHgXDANBgkqhkiG9w0BAQUFADB1MQswCQYDVQQGEwJTRzESMBAGA1UECAwJU2luZ2Fwb3JlMRIwEAYDVQQHDAlTaW5nYXBvcmUxIzAhBgNVBAoMGlRlc3RzIEZvciBzcGNwLWF1dGgtY2xpZW50MRkwFwYDVQQLDBBzcGNwLWF1dGgtY2xpZW50MCAXDTE4MDgxNTA2MTEyOFoYDzIwODQwNDMwMDYxMTI4WjB1MQswCQYDVQQGEwJTRzESMBAGA1UECAwJU2luZ2Fwb3JlMRIwEAYDVQQHDAlTaW5nYXBvcmUxIzAhBgNVBAoMGlRlc3RzIEZvciBzcGNwLWF1dGgtY2xpZW50MRkwFwYDVQQLDBBzcGNwLWF1dGgtY2xpZW50MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAu3YvExh1qjJBpkjALKfCuB67KqjzCc/EwUrBOkdoEYNLur80A2Y3R4v2q1AW8f8e3bMiPLLSlvxS0a0YyaiT2+4/ENjwy+dUa1o9XdiWLmHWWMWi7je1IK4zsDxoIt9nSOxaZmhu4aZeP+GhrMiVLnV0xKDl/4n2QZbD1GkdkG4ZuyqHJsmGcGtXLU1U6r6p6ZDrCTkBXjX96EDobHfXVFfi/RJ7VOD2aP2p4G7I104tNBYmB9+mkHr4AuOT9PhmOqq4a9Fo1E6VLnlo4FW/2ZK10gUU0f5wacnNillER0NGNwFWoTj2ASF9LiR6/39b4satRLAy8RxMclva8iK6yQIDAQABMA0GCSqGSIb3DQEBBQUAA4IBAQA4OIt/HwN/wmOiW3yeV+HaVlK5yMpJ1qMdxqTRagvbwDoXJbYtDvU4yFd4LrwF8lbtJ3NeM4PJFQGu3DVXqm9mZqcBGPBuQfaqww+aD3h94WCFUG/A+vswSC7o68/vTLjshCLT8yVtfTtI3KoNq67D60M56oPNZZo8fS9zWr+MzYLaCmQpKPwmEdzC2kcxSvXGTZ2Eyh+JM+ExaL7OHqMdE4lo1pfx9Nuc3QIjpowmsjXtl5LtPHiNhYOjtw1Js0y1jEmCKwq/AMTKwQV0zD7+wbdGmJjF16KRM8W3b+fDIdlqhhBFrTNK/wTVV3sWN2AE/NsN4N0sc7KtEgUWl5Fc</ds:X509Certificate></ds:X509Data></ds:KeyInfo></ds:Signature><saml2p:Artifact>AAQAAES0pW0VpFlmXMnNzniG8VN8z8UvBxnyd1cYkVEqx7Vspdg8PgqqNgJlZmF1bHRQ</saml2p:Artifact></saml2p:ArtifactResolve></soap11:Body></soap11:Envelope>'''
artifactrequest = '''<soap11:Envelope xmlns:soap11="http://schemas.xmlsoap.org/soap/envelope/"><soap11:Body><samlp:ArtifactResolve xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" Version="2.0" ID="_c26c488a1ccc0d32120a842051df5153" IssueInstant="2019-09-05T09:37:29Z"><saml:Issuer>http://localhost:5156/SP/samlArt</saml:Issuer><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#"><ds:SignedInfo><ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/><ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/><ds:Reference Id="#_c26c488a1ccc0d32120a842051df5153"><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/><ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/></ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><ds:DigestValue>jXx6EKDZcEHKvs0LB2TKayBzfEI=</ds:DigestValue></ds:Reference></ds:SignedInfo><ds:SignatureValue>kcDkeTVDDAgf9da2nwbxtHow9bJ6r2/Vp5QJZSVqj5l1g/8uvuon/P6Jkpm7Wo2gJEgA5f1TXLa2n1WVFSQTSFwFWTGXh1ek6lbPQlO4nzpB+HYrlU61CNzFi8OSFJj/OR/cDD/blJoYJHKPgJOrAFNqf/im8yEslpnb6eXgio2DmuYNAF6Y4lPkScKYiDAxvOPdWtW+up81d0MwG9X8tS+oWi91SJhyuordJUExgQzxHg+daF3+zZj7s04k2ITBOaOh97l7paRUbaYoe3ANa2l+yqknoaFX2M6kvcvMn2oCt0mGnOE8+UbSXfN9KvYafMNHRbobNj3s3mijzmqO1g==</ds:SignatureValue><ds:KeyInfo><ds:X509Data><ds:X509Certificate>MIIDaDCCAlACCQDR6jPZhsHgXDANBgkqhkiG9w0BAQUFADB1MQswCQYDVQQGEwJTRzESMBAGA1UECAwJU2luZ2Fwb3JlMRIwEAYDVQQHDAlTaW5nYXBvcmUxIzAhBgNVBAoMGlRlc3RzIEZvciBzcGNwLWF1dGgtY2xpZW50MRkwFwYDVQQLDBBzcGNwLWF1dGgtY2xpZW50MCAXDTE4MDgxNTA2MTEyOFoYDzIwODQwNDMwMDYxMTI4WjB1MQswCQYDVQQGEwJTRzESMBAGA1UECAwJU2luZ2Fwb3JlMRIwEAYDVQQHDAlTaW5nYXBvcmUxIzAhBgNVBAoMGlRlc3RzIEZvciBzcGNwLWF1dGgtY2xpZW50MRkwFwYDVQQLDBBzcGNwLWF1dGgtY2xpZW50MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAu3YvExh1qjJBpkjALKfCuB67KqjzCc/EwUrBOkdoEYNLur80A2Y3R4v2q1AW8f8e3bMiPLLSlvxS0a0YyaiT2+4/ENjwy+dUa1o9XdiWLmHWWMWi7je1IK4zsDxoIt9nSOxaZmhu4aZeP+GhrMiVLnV0xKDl/4n2QZbD1GkdkG4ZuyqHJsmGcGtXLU1U6r6p6ZDrCTkBXjX96EDobHfXVFfi/RJ7VOD2aP2p4G7I104tNBYmB9+mkHr4AuOT9PhmOqq4a9Fo1E6VLnlo4FW/2ZK10gUU0f5wacnNillER0NGNwFWoTj2ASF9LiR6/39b4satRLAy8RxMclva8iK6yQIDAQABMA0GCSqGSIb3DQEBBQUAA4IBAQA4OIt/HwN/wmOiW3yeV+HaVlK5yMpJ1qMdxqTRagvbwDoXJbYtDvU4yFd4LrwF8lbtJ3NeM4PJFQGu3DVXqm9mZqcBGPBuQfaqww+aD3h94WCFUG/A+vswSC7o68/vTLjshCLT8yVtfTtI3KoNq67D60M56oPNZZo8fS9zWr+MzYLaCmQpKPwmEdzC2kcxSvXGTZ2Eyh+JM+ExaL7OHqMdE4lo1pfx9Nuc3QIjpowmsjXtl5LtPHiNhYOjtw1Js0y1jEmCKwq/AMTKwQV0zD7+wbdGmJjF16KRM8W3b+fDIdlqhhBFrTNK/wTVV3sWN2AE/NsN4N0sc7KtEgUWl5Fc</ds:X509Certificate></ds:X509Data></ds:KeyInfo></ds:Signature><samlp:Artifact>AAQAAES0pW0VpFlmXMnNzniG8VN8z8UvBxnyd1cYkVEqx7Vspdg8PgqqNgJlZmF1bHRQ</samlp:Artifact></samlp:ArtifactResolve></soap11:Body></soap11:Envelope>'''

headers = {
                'SOAPAction': 'http://www.oasis-open.org/committees/security',
               'Cache-control': 'no-cache, no-store',
               'Pragma': 'no-cache',
               'Content-Type': 'text/xml; charset=utf-8'
               }
res = requests.post('http://localhost:5156/singpass/soap', data=artifactrequest.encode(), headers=headers)
print(res.status_code)
print(res.content)
